//-----2-----

#include <windows.h>
#include <stdio.h>
#include <tchar.h>
void DLL_Injection(char *dll, int process);
void DLL_Injection(char *dll, int process)
{
	HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, process);
	LPVOID pAddress = VirtualAllocEx(hProcess, NULL, strlen(dll), MEM_COMMIT, PAGE_READWRITE);
	WriteProcessMemory(hProcess, pAddress, dll, strlen(dll), NULL);
	HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)LoadLibraryA, pAddress, 0, NULL);
	WaitForSingleObject(hThread, INFINITE);
	CloseHandle(hThread);
	VirtualFreeEx(hProcess, pAddress, strlen(dll), MEM_RELEASE);
	CloseHandle(hProcess);
}