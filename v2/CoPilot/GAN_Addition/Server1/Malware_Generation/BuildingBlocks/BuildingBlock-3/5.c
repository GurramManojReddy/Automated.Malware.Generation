//-----3-----

#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define PATH_MAX 1024
void AutoRun()
{
    char path[PATH_MAX];
    char *p = path;
    char *exe = "BuildingBlock.exe";
    char *reg = "Software\\Microsoft\\Windows\\CurrentVersion\\Run";
    char *key = "BuildingBlock";
    GetModuleFileName(NULL, path, PATH_MAX);
    while (*p) p++;
    while (*p != '\\') p--;
    *p = '\0';
    strcat(path, "\\");
    strcat(path, exe);
    HKEY hkey = NULL;
    RegOpenKey(HKEY_CURRENT_USER, reg, &hkey);
    RegSetValueEx(hkey, key, 7, REG_SZ, path, strlen(path) + 1);
    RegCloseKey(hkey);
}