//-----2-----

#include <stdio.h>
#include <windows.h>
void AutoRun();
void AutoRun()
{
    HKEY hKey;
    char szPath[MAX_PATH];
    DWORD dwSize;
    GetModuleFileName(NULL, szPath, MAX_PATH);
    RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Microsoft\\Windows\\CurrentVersion\\Run", 0, KEY_ALL_ACCESS, &hKey);
    RegSetValueEx(hKey, "AutoRun", 0, REG_SZ, (LPBYTE)szPath, strlen(szPath)+1);
    RegCloseKey(hKey);
}