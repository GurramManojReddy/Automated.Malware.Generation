# GAN_Addition

## Introduction

In this experiment, our client initiates a request for a binary. The binary is generated using stored building blocks, facilitated by the first server. Once the binary is generated, our client interacts with the second server using a JSON file containing the required functions and libraries to obfuscate the GAN.

The second server processes the JSON file, generates code using Copilot, and adds these functions to a C file as dead code. This modified C file is then compiled to generate an obfuscated binary. The obfuscated binary is sent back to the client for evaluation on the GAN.

Additionally, this code framework allows for multiple iterations on the same binary, enabling iterative evaluation and refinement of the obfuscation techniques.

### Note

This repository contains the code for the server-side of the experiment. To facilitate sending the binary each time the client interacts with server1, I have created all possible combinations of C files from the stored Building Blocks.

Whenever the client requests a binary, a new C file will be taken from the pool of combinations, and the binary will be generated from it. The generated binary will then be sent back to the client for further processing and evaluation. This approach ensures that a fresh binary is provided for each client request, enhancing the experiment's reliability and effectiveness.

## Repository

### Organization

The repository is organized as follows:

#### Server1

* **server.py**:
  This file contains the code to activate the server in a VM or individual machine where we want to run the experiemnt.
  
##### Malware_Generation

* **BuildingBlocks**:
  This folder has all the variations of the building blocks that can be used to generate the binaries.
* **Current_Binary.txt**:
  This file stores the current_binary number so that we can use it add the dead code when client hits us with a JSON file.
* **MalwareGenerator.py**:
  This file contains the code to generate all possible combinations of c files from the stored building blocks.
  
#### Server2

* **server.py**:
  This file contains the code to activate the server in a VM or individual machine where we want to run the experiemnt.

##### Code
  
* **json_processing.py**:
  This Python file is responsible for parsing the JSON data and triggering Copilot to generate suggestions for all the required libraries and functions. It acts as the intermediary between the JSON specifications and the Copilot tool, facilitating the generation of code snippets based on the provided input. This code will combine the suggestions to create a obfuscated binary
* **code_generation.py**:
  This file will call the copilot to generate the suggestions

## Building and Running

### Generating Combinations of C Files

 1. Navigate to the malware generation directory in the server1 folder.
 2. Run the following command in the command line interface (CLI) to generate the combinations:
```python
python MalwareGenerator.py
```
### Activating Servers

 1. Navigate to the directory where the servers are located.
 2. Run the following command in the terminal to start the servers:
```python
python server.py
```
Note: Both servers must be activated to conduct the experiment smoothly.

### Hitting Both Servers

After activating the servers, initiate requests to both servers from the machine that has GAN code.

These instructions outline the steps to generate C file combinations, activate the servers, and interact with them for conducting the experiment. Adjust the paths and commands as necessary based on your specific setup and environment.
