//-----3-----

#include <windows.h>
#include <stdio.h>
void AutoRun()
{
    HKEY hKey;
    DWORD dwDisposition;
    char szPath[MAX_PATH];
    DWORD dwPathSize = sizeof(szPath);
    DWORD dwType = REG_SZ;
    GetModuleFileName(NULL, szPath, dwPathSize);
    RegCreateKeyEx(HKEY_CURRENT_USER,
                   "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run",
                   0, NULL, REG_OPTION_NON_VOLATILE, KEY_ALL_ACCESS, NULL,
                   &hKey, &dwDisposition);
    RegSetValueEx(hKey, "AutoRun", 0, dwType, (const BYTE *)szPath, dwPathSize);
    RegCloseKey(hKey);
}